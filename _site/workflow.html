<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emorie D Beck">

<title>Emorie D. Beck, PhD - Codebooks and Workflow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./descriptives.html" rel="next">
<link href="./tables.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Emorie D. Beck, PhD</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./publications.html">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./projects.html">
 <span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./tutorials.html" aria-current="page">
 <span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./talks.html">
 <span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./teaching.html">
 <span class="menu-text">Teaching</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Codebooks and Workflow</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorials.html" class="sidebar-item-text sidebar-link">Tutorials</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dplyr.html" class="sidebar-item-text sidebar-link">Data Manipulation: Intro to <code>dplyr</code></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./purrr.html" class="sidebar-item-text sidebar-link">Intro to <code>purrr</code></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggplot2.html" class="sidebar-item-text sidebar-link">Introduction to ggplot2</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tables.html" class="sidebar-item-text sidebar-link">APA Tables Part 1</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow.html" class="sidebar-item-text sidebar-link active">Codebooks and Workflow</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./descriptives.html" class="sidebar-item-text sidebar-link">Codebooks and Workflow Part 2</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-are-data" id="toc-what-are-data" class="nav-link active" data-scroll-target="#what-are-data">What Are Data?</a></li>
  <li><a href="#starting-your-workflow" id="toc-starting-your-workflow" class="nav-link" data-scroll-target="#starting-your-workflow">Starting Your Workflow</a></li>
  <li><a href="#workspace" id="toc-workspace" class="nav-link" data-scroll-target="#workspace">Workspace</a>
  <ul class="collapse">
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages">Packages</a></li>
  <li><a href="#codebook" id="toc-codebook" class="nav-link" data-scroll-target="#codebook">Codebook</a>
  <ul class="collapse">
  <li><a href="#key-takeaways-from-codebook-use" id="toc-key-takeaways-from-codebook-use" class="nav-link" data-scroll-target="#key-takeaways-from-codebook-use">Key Takeaways from Codebook Use</a></li>
  <li><a href="#read-in-the-codebook" id="toc-read-in-the-codebook" class="nav-link" data-scroll-target="#read-in-the-codebook">Read in the Codebook</a></li>
  </ul></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  </ul></li>
  <li><a href="#clean-data" id="toc-clean-data" class="nav-link" data-scroll-target="#clean-data">Clean Data</a>
  <ul class="collapse">
  <li><a href="#recode-variables" id="toc-recode-variables" class="nav-link" data-scroll-target="#recode-variables">Recode Variables</a></li>
  <li><a href="#reverse-scoring" id="toc-reverse-scoring" class="nav-link" data-scroll-target="#reverse-scoring">Reverse-Scoring</a></li>
  <li><a href="#create-composites" id="toc-create-composites" class="nav-link" data-scroll-target="#create-composites">Create Composites</a>
  <ul class="collapse">
  <li><a href="#bfi-s" id="toc-bfi-s" class="nav-link" data-scroll-target="#bfi-s">BFI-S</a></li>
  <li><a href="#life-events" id="toc-life-events" class="nav-link" data-scroll-target="#life-events">Life Events</a></li>
  </ul></li>
  <li><a href="#create-combination-data-set" id="toc-create-combination-data-set" class="nav-link" data-scroll-target="#create-combination-data-set">Create Combination Data Set</a>
  <ul class="collapse">
  <li><a href="#save-your-data" id="toc-save-your-data" class="nav-link" data-scroll-target="#save-your-data">Save Your Data</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#descriptives" id="toc-descriptives" class="nav-link" data-scroll-target="#descriptives">Descriptives</a>
  <ul class="collapse">
  <li><a href="#big-five-descriptives" id="toc-big-five-descriptives" class="nav-link" data-scroll-target="#big-five-descriptives">Big Five Descriptives</a></li>
  <li><a href="#big-five-distributions" id="toc-big-five-distributions" class="nav-link" data-scroll-target="#big-five-distributions">Big Five Distributions</a></li>
  <li><a href="#life-events-descriptives" id="toc-life-events-descriptives" class="nav-link" data-scroll-target="#life-events-descriptives">Life Events Descriptives</a></li>
  <li><a href="#life-event-plots" id="toc-life-event-plots" class="nav-link" data-scroll-target="#life-event-plots">Life Event Plots</a></li>
  <li><a href="#scale-reliability" id="toc-scale-reliability" class="nav-link" data-scroll-target="#scale-reliability">Scale Reliability</a></li>
  <li><a href="#zero-order-correlations" id="toc-zero-order-correlations" class="nav-link" data-scroll-target="#zero-order-correlations">Zero-Order Correlations</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Codebooks and Workflow</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Emorie D Beck </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="cell">

</div>
<p><a href="https://raw.githubusercontent.com/emoriebeck/R-tutorials/master/06_workflow/workflow.Rmd" download="">Download .Rmd (won’t work in Safari or IE)</a><br>
<a href="https://github.com/emoriebeck/R-tutorials/tree/master/06_workflow" target="_blank">See GitHub Repository</a></p>
<section id="what-are-data" class="level1">
<h1>What Are Data?</h1>
<p>Data are the core of everything that we do in statistical analysis. Data come in many forms, and I don’t just mean <code>.csv</code>, <code>.xls</code>, <code>.sav</code>, etc. Data can be wide, long, documented, fragmented, messy, and about anything else that you can imagine.</p>
<p>Although data could arguably be more means than end in psychology, the importance of understanding the structure and format of your data cannot overstated. Failure to understand your data could end in improper techniques and flagrantly wrong inferences at worst.</p>
<p>In this tutorial, we are going to talk data management and basic data cleaning. Earlier tutorials will go more in depth into data cleaning and reshaping. This tutorial is meant to take what you learned in those and to help you to think about those in more nuanced ways and develop a functional workflow for conducting your own research.</p>
</section>
<section id="starting-your-workflow" class="level1">
<h1>Starting Your Workflow</h1>
<div class="cell">

</div>
<p>A good workflow starts by keeping your files organized outside of <code>R</code>. A typical research project typically involves:</p>
<ol type="1">
<li>Data<br>
</li>
<li>Scripts<br>
</li>
<li>Results<br>
</li>
<li>Manuscript<br>
</li>
<li>Experimental Materials (optional)<br>
</li>
<li>Preregistration<br>
</li>
<li>Papers</li>
</ol>
<p>You can set this up outside of <code>R</code>, but I’m going to quickly show you how to set up inside <code>R</code>.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="st">"~/Desktop/06_workflow"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"data"</span>, <span class="st">"scripts"</span>, <span class="st">"results"</span>, <span class="st">"manuscript"</span>, <span class="st">"experimental materials"</span>, </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"preregistration"</span>, <span class="st">"papers"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(data_path, ., <span class="at">sep =</span> <span class="st">"/"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(., dir.create)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="workspace" class="level1">
<h1>Workspace</h1>
<p>When I create an <code>rmarkdown</code> document for my own research projects, I always start by setting up my my workspace. This involves 3 steps:</p>
<ol type="1">
<li>Packages<br>
</li>
<li>Codebook(s)<br>
</li>
<li>Data</li>
</ol>
<p>Below, we will step through each of these separately, setting ourselves up to (hopefully) flawlessly communicate with <code>R</code> and our data.</p>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<p>Packages seems like the most basic step, but it is actually very important. <strong>ALWAYS LOAD YOUR PACKAGES IN A VERY INTENTIONAL ORDER AT THE BEGINNING OF YOUR SCRIPT.</strong> Package conflicts suck, so it needs to be shouted.</p>
<p>For this tutorial, we are going to quite simple. We will load the <code>psych</code> package for data descriptives, some options for cleaning and reverse coding, and some evaluations of our scales. The <code>plyr</code> package is the predecessor of the <code>dplyr</code> package, which is a core package of the <code>tidyverse</code>, which you will become quite familiar with in these tutorials. I like the <code>plyr</code> package because it contains a couple of functions (e.g.&nbsp;<code>mapvalues()</code>) that I find quite useful. Finally, we load the <code>tidyverse</code> package, which is actually a complilation of 8 packages. Some of these we will use today and some we will use in later tutorials. All are very useful and are arguably some of the most powerful tools <code>R</code> offers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plyr)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="codebook" class="level2">
<h2 class="anchored" data-anchor-id="codebook">Codebook</h2>
<p>The second step is a codebook. Arguably, this is the first step because you should <em>create</em> the codebook long before you open <code>R</code> and load your data.</p>
<p>In this case, we are going to using some data from the <a href="https://www.diw.de/en/soep/">German Socioeconomic Panel Study (GSOEP)</a>, which is an ongoing Panel Study in Germany. Note that these data are for teaching purposes only, shared under the license for the Comprehensive SOEP teaching dataset, which I, as a contracted SOEP user, can use for teaching purposes. These data represent select cases from the full data set and should not be used for the purpose of publication. The full data are available for free at https://www.diw.de/en/diw_02.c.222829.en/access_and_ordering.html.</p>
<p>For this tutorial, I created the codebook for you <a href="https://github.com/emoriebeck/R-tutorials/raw/master/ALDA/week_1_descriptives/codebook.csv" download="">(Download (won’t work in Safari or IE))</a>, and included what I believe are the core columns you may need. Some of these columns may not be particularly helpful for every dataset.</p>
<p>Here are my core columns that are based on the original data:<br>
1. <strong>dataset</strong>: this column indexes the <strong>name</strong> of the dataset that you will be pulling the data from. This is important because we will use this info later on (see purrr tutorial) to load and clean specific data files. Even if you don’t have multiple data sets, I believe consistency is more important and suggest using this.<br>
2. <strong>old_name</strong>: this column is the name of the variable in the data you are pulling it from. This should be exact. The goal of this column is that it will allow us to select() variables from the original data file and rename them something that is more useful to us.<br>
3. <strong>item_text</strong>: this column is the original text that participants saw or a description of the item.<br>
4. <strong>category</strong>: broad categories that different variables can be put into. I’m a fan of naming them things like “outcome”, “predictor”, “moderator”, “demographic”, “procedural”, etc. but sometimes use more descriptive labels like “Big 5” to indicate the model from which the measures are derived.<br>
5. <strong>label</strong>: label is basically one level lower than category. So if the category is Big 5, the label would be, or example, “A” for Agreeableness, “SWB” for subjective well-being, etc. This column is most important and useful when you have multiple items in a scales, so I’ll typically leave this blank when something is a standalone variable (e.g.&nbsp;sex, single-item scales, etc.).<br>
6. <strong>item_name</strong>: This is the lowest level and most descriptive variable. It indicates which item in scale something is. So it may be “kind” for Agreebleness or “sex” for the demographic biological sex variable.<br>
7. <strong>new_name</strong>: This is a column that brings together much of the information we’ve already collected. It’s purpose is to be the new name that we will give to the variable that is more useful and descriptive to us. This is a constructed variable that brings together others. I like to make it a combination of “category”, “label”, “item_name”, and year using varying combos of “_” and “.” that we can use later with tidyverse functions. I typically construct this variable in Excel using the CONCATENATE() function, but it could also be done in <code>R</code>. The reason I do it in Excel is that it makes it easier for someone who may be reviewing my codebook.<br>
8. <strong>scale</strong>: this column tells you what the scale of the variable is. Is it a numeric variable, a text variable, etc. This is helpful for knowing the plausible range. 9. <strong>recode</strong>: sometimes, we want to recode variables for analyses (e.g.&nbsp;for categorical variables with many levels where sample sizes for some levels are too small to actually do anything with it). I use this column to note the kind of recoding I’ll do to a variable for transparency.</p>
<p>Here are additional columns that will make our lives easier or are applicable to some but not all data sets:<br>
10. <strong>reverse</strong>: this column tells you whether items in a scale need to be reverse coded. I recommend coding this as 1 (leave alone) and -1 (reverse) for reasons that will become clear later.<br>
11. <strong>mini</strong>: this column represents the minimum value of scales that are numeric. Leave blank otherwise.<br>
12. <strong>maxi</strong>: this column represents the maximumv alue of scales that are numeric. Leave blank otherwise.<br>
13. <strong>year</strong>: for longitudinal data, we have several waves of data and the name of the same item across waves is often different, so it’s important to note to which wave an item belongs. You can do this by noting the wave (e.g.&nbsp;1, 2, 3), but I prefer the actual year the data were collected (e.g.&nbsp;2005, 2009, etc.)<br>
15. <strong>meta</strong>: Some datasets have a meta name, which essentially means a name that variable has across all waves to make it clear which variables are the same. They are not always useful as some data sets have meta names but no great way of extracting variables using them. But they’re still typically useful to include in your codebook regardless.</p>
<section id="key-takeaways-from-codebook-use" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaways-from-codebook-use">Key Takeaways from Codebook Use</h3>
<ol type="1">
<li>Reproducibility and Transparency<br>
</li>
<li>Creating Composites<br>
</li>
<li>Keeping Track of Classes of Variables<br>
</li>
<li>Easier Reverse-Coding<br>
</li>
<li>Easier Recoding<br>
</li>
<li>Your future self will thank you.</li>
</ol>
<p>Below, I will demonstrate each of these.</p>
</section>
<section id="read-in-the-codebook" class="level3">
<h3 class="anchored" data-anchor-id="read-in-the-codebook">Read in the Codebook</h3>
<p>Below, I’ll load in the codebook we will use for this study, which will include all of the above columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set the path</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>wd <span class="ot">&lt;-</span> <span class="st">"https://github.com/emoriebeck/R-tutorials/blob/master/06_workflow"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="fu">sprintf</span>(<span class="st">"%s/data/codebook.csv?raw=true"</span>, wd), </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="fu">sprintf</span>(<span class="st">"%s/data/codebook.csv"</span>, data_path)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># load the codebook</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>(codebook <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s/data/codebook.csv"</span>, data_path) <span class="sc">%&gt;%</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(.) <span class="sc">%&gt;%</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">old_name =</span> <span class="fu">str_to_lower</span>(old_name)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 153 × 13
   dataset old_name item_text  scale categ…¹ label item_…²  year new_n…³ reverse
   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
 1 &lt;NA&gt;    persnr   Never Cha…  &lt;NA&gt; Proced… &lt;NA&gt;  SID         0 Proced…       1
 2 &lt;NA&gt;    hhnr     household…  &lt;NA&gt; Proced… &lt;NA&gt;  househ…     0 Proced…       1
 3 ppfad   gebjahr  Year of B… "num… Demogr… &lt;NA&gt;  DOB         0 Demogr…       1
 4 ppfad   sex      Sex        "\n1… Demogr… &lt;NA&gt;  Sex         0 Demogr…       1
 5 vp      vp12501  Thorough …  &lt;NA&gt; Big 5   C     thorou…  2005 Big 5_…       1
 6 zp      zp12001  Thorough …  &lt;NA&gt; Big 5   C     thorou…  2009 Big 5_…       1
 7 bdp     bdp15101 Thorough …  &lt;NA&gt; Big 5   C     thorou…  2013 Big 5_…       1
 8 vp      vp12502  Am commun…  &lt;NA&gt; Big 5   E     commun…  2005 Big 5_…       1
 9 zp      zp12002  Am commun…  &lt;NA&gt; Big 5   E     commun…  2009 Big 5_…       1
10 bdp     bdp15102 Am commun…  &lt;NA&gt; Big 5   E     commun…  2013 Big 5_…       1
# … with 143 more rows, 3 more variables: mini &lt;dbl&gt;, maxi &lt;dbl&gt;, recode &lt;chr&gt;,
#   and abbreviated variable names ¹​category, ²​item_name, ³​new_name</code></pre>
</div>
</div>
</section>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>First, we need to load in the data. We’re going to use three waves of data from the German Socioeconomic Panel Study, which is a longitudinal study of German households that has been conducted since 1984. We’re going to use more recent data from three waves of personality data collected between 2005 and 2013.</p>
<p><em>Note</em>: we will be using the teaching set of the GSOEP data set. I will not be pulling from the raw files as a result of this. I will also not be mirroring the format that you would usually load the GSOEP from because that is slightly more complicated and somethng we will return to in a later tutorial on <a href="https://emoriebeck.github.io/R-tutorials/purrr/" target="_blank"><code>purrr</code> (link)</a> after we have more skills. I’ve left that code for now, but it won’t make a lot of sense right now.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"~/Box/network/other projects/PCLE Replication/data/sav_files"</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ref <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s/cirdef.sav"</span>, path) <span class="sc">%&gt;%</span> haven<span class="sc">::</span><span class="fu">read_sav</span>(.) <span class="sc">%&gt;%</span> <span class="fu">select</span>(hhnr, rgroup20)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>read_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(Year){</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> (codebook <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> Year <span class="sc">|</span> year <span class="sc">==</span> <span class="dv">0</span>))<span class="sc">$</span>old_name</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  set <span class="ot">&lt;-</span> (codebook <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> Year))<span class="sc">$</span>dataset[<span class="dv">1</span>]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sprintf</span>(<span class="st">"%s/%s.sav"</span>, path, set) <span class="sc">%&gt;%</span> haven<span class="sc">::</span><span class="fu">read_sav</span>(.) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">full_join</span>(ref) <span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(rgroup20 <span class="sc">&gt;</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">one_of</span>(vars)) <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(<span class="at">key =</span> item, <span class="at">value =</span> value, <span class="sc">-</span>persnr, <span class="sc">-</span>hhnr, <span class="at">na.rm =</span> T)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> (codebook <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span>))<span class="sc">$</span>old_name</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>dem <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s/ppfad.sav"</span>, path) <span class="sc">%&gt;%</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  haven<span class="sc">::</span><span class="fu">read_sav</span>(.) <span class="sc">%&gt;%</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vars)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2005</span><span class="sc">:</span><span class="dv">2015</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(year, read_fun)) <span class="sc">%&gt;%</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>year) <span class="sc">%&gt;%</span> </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> item, <span class="at">value =</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(dem) <span class="sc">%&gt;%</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(., <span class="at">file =</span> <span class="st">"~/Documents/Github/R-tutorials/ALDA/week_1_descriptives/data/week_1_data.csv"</span>, <span class="at">row.names =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code below shows how I would read in and rename a wide-format data set using the codebook I created.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download the file</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="fu">sprintf</span>(<span class="st">"%s/data/workflow_data.csv?raw=true"</span>, wd), </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="fu">sprintf</span>(<span class="st">"%s/data/workflow_data.csv"</span>, data_path)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>old.names <span class="ot">&lt;-</span> codebook<span class="sc">$</span>old_name <span class="co"># get old column names</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>new.names <span class="ot">&lt;-</span> codebook<span class="sc">$</span>new_name <span class="co"># get new column names</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>(soep <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s/data/workflow_data.csv"</span>, data_path) <span class="sc">%&gt;%</span> <span class="co"># path to data</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(.) <span class="sc">%&gt;%</span> <span class="co"># read in data</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(old.names) <span class="sc">%&gt;%</span> <span class="co"># select the columns from our codebook</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(new.names)) <span class="co"># rename columns with our new names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 28,290 × 153
   Procedural_…¹ Proce…² Demog…³ Demog…⁴ Big 5…⁵ Big 5…⁶ Big 5…⁷ Big 5…⁸ Big 5…⁹
           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1           901      94    1951       2       6      -1       7       4       4
 2          1202     124    1913       2       7      NA      NA       6      NA
 3          2301     230    1946       1       7       6       6       6       4
 4          2302     230    1946       2       6       7       7       5       5
 5          2304     230    1978       1       5      NA      NA       7      NA
 6          2305     230    1946       2      NA      NA      NA      NA      NA
 7          4601     469    1933       2       6      NA      NA       6      NA
 8          4701     477    1919       2       6       6      NA       6       5
 9          4901     493    1925       2       5       6       6       7       6
10          5201     523    1955       1       7       7       7       5       6
# … with 28,280 more rows, 144 more variables: `Big 5__E_communic.2013` &lt;dbl&gt;,
#   `Big 5__A_coarse.2005` &lt;dbl&gt;, `Big 5__A_coarse.2009` &lt;dbl&gt;,
#   `Big 5__A_coarse.2013` &lt;dbl&gt;, `Big 5__O_original.2005` &lt;dbl&gt;,
#   `Big 5__O_original.2009` &lt;dbl&gt;, `Big 5__O_original.2013` &lt;dbl&gt;,
#   `Big 5__N_worry.2005` &lt;dbl&gt;, `Big 5__N_worry.2009` &lt;dbl&gt;,
#   `Big 5__N_worry.2013` &lt;dbl&gt;, `Big 5__A_forgive.2005` &lt;dbl&gt;,
#   `Big 5__A_forgive.2009` &lt;dbl&gt;, `Big 5__A_forgive.2013` &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
</section>
<section id="clean-data" class="level1">
<h1>Clean Data</h1>
<section id="recode-variables" class="level2">
<h2 class="anchored" data-anchor-id="recode-variables">Recode Variables</h2>
<p>Many of the data we work with have observations that are missing for a variety of reasons. In <code>R</code>, we treat missing values as <code>NA</code>, but many other programs from which you may be importing your data may use other codes (e.g.&nbsp;999, -999, etc.). Large panel studies tend to use small negative values to indicate different types of missingness. This is why it is important to note down the scale in your codebook. That way you can check which values may need to be recoded to explicit <code>NA</code> values.</p>
<p>In the GSOEP, <code>-1</code> to <code>-7</code> indicate various types of missing values, so we will recode these to <code>NA</code>. To do this, we will use one of my favorite functions, <code>mapvalues()</code>, from the <code>plyr</code> package. In later tutorials where we read in and manipulate more complex data sets, we will use <code>mapvalues()</code> a lot. Basically, mapvalues takes 4 key arguments: (1) the variable you are recoding, (2) a vector of initial values <code>from</code> which you want to (3) recode your variable <code>to</code> using a vector of new values in the same order as the old values, and (4) a way to turn off warnings if some levels are not in your data (<code>warn_missing = F</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(soep <span class="ot">&lt;-</span> soep <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">as.numeric</span>(<span class="fu">mapvalues</span>(., <span class="at">from =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">-</span><span class="dv">7</span>, <span class="sc">-</span><span class="dv">1</span>), <span class="co"># recode negative </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">to =</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">7</span>), <span class="at">warn_missing =</span> F)))) <span class="co"># values to NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 28,290 × 153
   Procedural_…¹ Proce…² Demog…³ Demog…⁴ Big 5…⁵ Big 5…⁶ Big 5…⁷ Big 5…⁸ Big 5…⁹
           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1           901      94    1951       2       6      NA       7       4       4
 2          1202     124    1913       2       7      NA      NA       6      NA
 3          2301     230    1946       1       7       6       6       6       4
 4          2302     230    1946       2       6       7       7       5       5
 5          2304     230    1978       1       5      NA      NA       7      NA
 6          2305     230    1946       2      NA      NA      NA      NA      NA
 7          4601     469    1933       2       6      NA      NA       6      NA
 8          4701     477    1919       2       6       6      NA       6       5
 9          4901     493    1925       2       5       6       6       7       6
10          5201     523    1955       1       7       7       7       5       6
# … with 28,280 more rows, 144 more variables: `Big 5__E_communic.2013` &lt;dbl&gt;,
#   `Big 5__A_coarse.2005` &lt;dbl&gt;, `Big 5__A_coarse.2009` &lt;dbl&gt;,
#   `Big 5__A_coarse.2013` &lt;dbl&gt;, `Big 5__O_original.2005` &lt;dbl&gt;,
#   `Big 5__O_original.2009` &lt;dbl&gt;, `Big 5__O_original.2013` &lt;dbl&gt;,
#   `Big 5__N_worry.2005` &lt;dbl&gt;, `Big 5__N_worry.2009` &lt;dbl&gt;,
#   `Big 5__N_worry.2013` &lt;dbl&gt;, `Big 5__A_forgive.2005` &lt;dbl&gt;,
#   `Big 5__A_forgive.2009` &lt;dbl&gt;, `Big 5__A_forgive.2013` &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="reverse-scoring" class="level2">
<h2 class="anchored" data-anchor-id="reverse-scoring">Reverse-Scoring</h2>
<p>Many scales we use have items that are positively or negatively keyed. High ratings on positively keyed items are indicative of being high on a construct. In contrast, high ratings on negatively keyed items are indicative of being low on a construct. Thus, to create the composite scores of constructs we often use, we must first “reverse” the negatively keyed items so that high scores indicate being higher on the construct.</p>
<p>There are a few ways to do this in <code>R</code>. Below, I’ll demonstrate how to do so using the <code>reverse.code()</code> function in the <code>psych</code> package in <code>R</code>. This function was built to make reverse coding more efficient (i.e.&nbsp;please don’t run every item that needs to be recoded with separate lines of code!!).</p>
<p>Before we can do that, though, we need to restructure the data a bit in order to bring in the reverse coding information from our codebook. We will talk more about what’s happening here in later tutorials on <code>tidyr</code>, so for now, just bear with me.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(soep_long <span class="ot">&lt;-</span> soep <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> item, <span class="at">value =</span> value, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">"Procedural"</span>), <span class="co"># change to long format</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>         <span class="sc">-</span><span class="fu">contains</span>(<span class="st">"Demographic"</span>), <span class="at">na.rm =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(codebook <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">item =</span> new_name, reverse, mini, maxi)) <span class="sc">%&gt;%</span> <span class="co"># bring in codebook</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(item, <span class="fu">c</span>(<span class="st">"type"</span>, <span class="st">"item"</span>), <span class="at">sep =</span> <span class="st">"__"</span>) <span class="sc">%&gt;%</span> <span class="co"># separate category</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(item, <span class="fu">c</span>(<span class="st">"item"</span>, <span class="st">"year"</span>), <span class="at">sep =</span> <span class="st">"[.]"</span>) <span class="sc">%&gt;%</span> <span class="co"># seprate year</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(item, <span class="fu">c</span>(<span class="st">"item"</span>, <span class="st">"scrap"</span>), <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span> <span class="co"># separate scale and item</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.numeric</span>(value), <span class="co"># change to numeric</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">value =</span> <span class="fu">ifelse</span>(reverse <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>, </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">reverse.code</span>(<span class="sc">-</span><span class="dv">1</span>, value, <span class="at">mini =</span> mini, <span class="at">maxi =</span> maxi), value)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 471,722 × 12
   Procedu…¹ Proce…² Demog…³ Demog…⁴ type  item  scrap year  value reverse  mini
       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1       901      94    1951       2 Big 5 C     thor… 2005      6       1     1
 2      1202     124    1913       2 Big 5 C     thor… 2005      7       1     1
 3      2301     230    1946       1 Big 5 C     thor… 2005      7       1     1
 4      2302     230    1946       2 Big 5 C     thor… 2005      6       1     1
 5      2304     230    1978       1 Big 5 C     thor… 2005      5       1     1
 6      4601     469    1933       2 Big 5 C     thor… 2005      6       1     1
 7      4701     477    1919       2 Big 5 C     thor… 2005      6       1     1
 8      4901     493    1925       2 Big 5 C     thor… 2005      5       1     1
 9      5201     523    1955       1 Big 5 C     thor… 2005      7       1     1
10      5202     523    1956       2 Big 5 C     thor… 2005      6       1     1
# … with 471,712 more rows, 1 more variable: maxi &lt;dbl&gt;, and abbreviated
#   variable names ¹​Procedural__SID, ²​Procedural__household, ³​Demographic__DOB,
#   ⁴​Demographic__Sex</code></pre>
</div>
</div>
</section>
<section id="create-composites" class="level2">
<h2 class="anchored" data-anchor-id="create-composites">Create Composites</h2>
<p>Now that we have reverse coded our items, we can create composites.</p>
<section id="bfi-s" class="level3">
<h3 class="anchored" data-anchor-id="bfi-s">BFI-S</h3>
<p>We’ll start with our scale – in this case, the Big 5 from the German translation of the BFI-S.</p>
<p>Here’s the simplest way, which is also the long way because you’d have to do it for each scale in each year, which I don’t recommend.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>soep<span class="sc">$</span>C<span class="fl">.2005</span> <span class="ot">&lt;-</span> <span class="fu">with</span>(soep, <span class="fu">rowMeans</span>(<span class="fu">cbind</span>(<span class="st">`</span><span class="at">Big 5__C_thorough.2005</span><span class="st">`</span>, <span class="st">`</span><span class="at">Big 5__C_lazy.2005</span><span class="st">`</span>, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                          <span class="st">`</span><span class="at">Big 5__C_efficient.2005</span><span class="st">`</span>), <span class="at">na.rm =</span> T)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But personally, I don’t have a desire to do that 15 times, so we can use our codebook and <code>dplyr</code> to make our lives a whole lot easier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>soep <span class="ot">&lt;-</span> soep <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>C<span class="fl">.2005</span>) <span class="co"># get rid of added column</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>(b5_soep_long <span class="ot">&lt;-</span> soep_long <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"Big 5"</span>) <span class="sc">%&gt;%</span> <span class="co"># keep Big 5 variables</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Procedural__SID, item, year) <span class="sc">%&gt;%</span> <span class="co"># group by person, construct, &amp; year</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">value =</span> <span class="fu">mean</span>(value, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> <span class="co"># calculate means</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="co"># ungroup</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(soep_long <span class="sc">%&gt;%</span> <span class="co"># bring demographic info back in </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Procedural__SID, <span class="at">DOB =</span> Demographic__DOB, <span class="at">Sex =</span> Demographic__Sex) <span class="sc">%&gt;%</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 151,186 × 6
   Procedural__SID item  year  value   DOB   Sex
             &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1             901 A     2005   4.67  1951     2
 2             901 A     2009   5     1951     2
 3             901 A     2013   4.67  1951     2
 4             901 C     2005   5     1951     2
 5             901 C     2009   5     1951     2
 6             901 C     2013   5.67  1951     2
 7             901 E     2005   3.67  1951     2
 8             901 E     2009   3.67  1951     2
 9             901 E     2013   3.67  1951     2
10             901 N     2005   3.33  1951     2
# … with 151,176 more rows</code></pre>
</div>
</div>
</section>
<section id="life-events" class="level3">
<h3 class="anchored" data-anchor-id="life-events">Life Events</h3>
<p>We also want to create a variable that indexes whether our participants experienced any of the life events during the years of interest (2005-2015).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(events_long <span class="ot">&lt;-</span> soep_long <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"Life Event"</span>) <span class="sc">%&gt;%</span> <span class="co"># keep only life events</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Procedural__SID, item) <span class="sc">%&gt;%</span> <span class="co"># group by person and event</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">le_value =</span> <span class="fu">sum</span>(value, <span class="at">na.rm =</span> T), <span class="co"># sum up whether they experiened the event at all</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">le_value =</span> <span class="fu">ifelse</span>(le_value <span class="sc">&gt;</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> <span class="co"># if more than once 1, otherwise 0</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,061 × 3
   Procedural__SID item      le_value
             &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
 1             901 MomDied          1
 2            2301 MoveIn           0
 3            2301 PartDied         1
 4            2305 MoveIn           0
 5            4601 PartDied         0
 6            5201 ChldMvOut        1
 7            5201 DadDied          0
 8            5202 ChldMvOut        1
 9            5203 MoveIn           1
10            5303 MomDied          0
# … with 15,051 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="create-combination-data-set" class="level2">
<h2 class="anchored" data-anchor-id="create-combination-data-set">Create Combination Data Set</h2>
<p>For the analyses I’d want to do with this data set, I’d want to combine every combination of personality traits with every combination of event we have data for each person for. In other words, I’m looking for a data frame that looks like this:</p>
<table>
<thead>
<tr class="header">
<th>SID</th>
<th>year</th>
<th>Event</th>
<th>le_value</th>
<th>Trait</th>
<th>p_value</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create combined data frame  </span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>(combined_long <span class="ot">&lt;-</span> b5_soep_long <span class="sc">%&gt;%</span> <span class="co"># take Big Five Data </span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(item, value) <span class="sc">%&gt;%</span> <span class="co"># Spread it wide </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(events_long <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Event =</span> item)) <span class="sc">%&gt;%</span> <span class="co"># Join it with Events</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Event)) <span class="sc">%&gt;%</span> <span class="co"># take out people who don't have event data</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> Trait, <span class="at">value =</span> p_value, A<span class="sc">:</span>O)) <span class="co"># change to doubly long</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 138,820 × 8
   Procedural__SID year    DOB   Sex Event    le_value Trait p_value
             &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
 1             901 2005   1951     2 MomDied         1 A        4.67
 2             901 2009   1951     2 MomDied         1 A        5   
 3             901 2013   1951     2 MomDied         1 A        4.67
 4            2301 2005   1946     1 MoveIn          0 A        5   
 5            2301 2005   1946     1 PartDied        1 A        5   
 6            2301 2009   1946     1 MoveIn          0 A        5.67
 7            2301 2009   1946     1 PartDied        1 A        5.67
 8            2301 2013   1946     1 MoveIn          0 A        6   
 9            2301 2013   1946     1 PartDied        1 A        6   
10            4601 2005   1933     2 PartDied        0 A        6.33
# … with 138,810 more rows</code></pre>
</div>
</div>
<section id="save-your-data" class="level3">
<h3 class="anchored" data-anchor-id="save-your-data">Save Your Data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> combined_long</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    , <span class="at">file =</span> <span class="fu">sprintf</span>(<span class="st">"%s/data/clean_data_%s.csv"</span>, data_path, <span class="fu">Sys.Date</span>())</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    , <span class="at">row.names =</span> F</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="descriptives" class="level1">
<h1>Descriptives</h1>
<p>Descriptives of your data are incredibly important. They are your first line of defense against things that could go wrong later on when you run inferential stats. The help you check the distribution of your variables (e.g.&nbsp;non-normally distributed), look for implausible values, etc.</p>
<section id="big-five-descriptives" class="level2">
<h2 class="anchored" data-anchor-id="big-five-descriptives">Big Five Descriptives</h2>
<p>There are lots of ways to create great tables of descriptives. My favorite way is using <code>dplyr</code>, but we will save that for a later lesson on creating great APA style tables in <code>R</code>. For now, we’ll use a wonderfully helpful function from the <code>psych</code> package called <code>describe()</code> in conjunction with a small amount of <code>tidyr</code> to reshape the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>b5_soep_long  <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(tmp, item, year, <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span> <span class="co"># make new column that joins item and year</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(tmp, value) <span class="sc">%&gt;%</span> <span class="co"># make wide because that helps describe</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe</span>(.) <span class="sc">%&gt;%</span> <span class="co"># call describe </span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  data.frame <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"V"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 V vars     n         mean           sd       median
1  Procedural__SID    1 16719 8.321023e+06 1.067773e+07 3.105002e+06
2              DOB    2 16719 1.960026e+03 1.847643e+01 1.960000e+03
3              Sex    3 16719 1.524314e+00 4.994234e-01 2.000000e+00
4           A_2005    4 10419 5.458281e+00 9.836785e-01 5.666667e+00
5           A_2009    5 10294 5.348536e+00 9.853567e-01 5.333333e+00
6           A_2013    6  9535 5.407726e+00 9.547886e-01 5.333333e+00
7           C_2005    7 10412 5.899987e+00 9.559877e-01 6.000000e+00
8           C_2009    8 10290 5.823275e+00 9.544427e-01 6.000000e+00
9           C_2013    9  9530 5.839542e+00 9.146635e-01 6.000000e+00
10          E_2005   10 10416 4.818756e+00 1.152964e+00 5.000000e+00
11          E_2009   11 10291 4.772001e+00 1.147503e+00 4.666667e+00
12          E_2013   12  9533 4.870642e+00 1.112361e+00 5.000000e+00
13          N_2005   13 10413 4.046000e+00 1.226367e+00 4.000000e+00
14          N_2009   14 10294 4.176753e+00 1.220681e+00 4.333333e+00
15          N_2013   15  9534 4.249825e+00 1.210948e+00 4.333333e+00
16          O_2005   16 10408 4.507286e+00 1.220377e+00 4.666667e+00
17          O_2009   17 10287 4.398351e+00 1.215924e+00 4.333333e+00
18          O_2013   18  9530 4.600437e+00 1.178126e+00 4.666667e+00
        trimmed          mad  min      max    range        skew    kurtosis
1  6.487615e+06 3735541.1688  901 35022002 35021101  1.50377658  0.55782194
2  1.960218e+03      20.7564 1909     1995       86 -0.07556870 -0.84082302
3  1.530388e+00       0.0000    1        2        1 -0.09736107 -1.99063988
4  5.498161e+00       0.9884    1        7        6 -0.39523879 -0.16102753
5  5.384086e+00       0.9884    1        7        6 -0.36634029 -0.18932735
6  5.446367e+00       0.9884    1        7        6 -0.42492164  0.03645295
7  6.007123e+00       0.9884    1        7        6 -0.95874147  0.86977466
8  5.917861e+00       0.9884    1        7        6 -0.82052339  0.48848517
9  5.920339e+00       0.9884    1        7        6 -0.71952576  0.18022243
10 4.848152e+00       0.9884    1        7        6 -0.26500996 -0.16399435
11 4.796712e+00       0.9884    1        7        6 -0.23569234 -0.16980025
12 4.903523e+00       0.9884    1        7        6 -0.28970330 -0.17933079
13 4.057816e+00       1.4826    1        7        6 -0.06916484 -0.31968532
14 4.201190e+00       0.9884    1        7        6 -0.16849233 -0.29596620
15 4.267239e+00       1.2355    1        7        6 -0.15031344 -0.30048828
16 4.534302e+00       1.4826    1        7        6 -0.23155625 -0.17674732
17 4.411250e+00       1.4826    1        7        6 -0.09636281 -0.29698790
18 4.622661e+00       0.9884    1        7        6 -0.21091876 -0.20046540
             se
1  8.257980e+04
2  1.428936e-01
3  3.862458e-03
4  9.636962e-03
5  9.711837e-03
6  9.777929e-03
7  9.368827e-03
8  9.408972e-03
9  9.369467e-03
10 1.129705e-02
11 1.131162e-02
12 1.139282e-02
13 1.201801e-02
14 1.203123e-02
15 1.240190e-02
16 1.196219e-02
17 1.198842e-02
18 1.206827e-02</code></pre>
</div>
</div>
</section>
<section id="big-five-distributions" class="level2">
<h2 class="anchored" data-anchor-id="big-five-distributions">Big Five Distributions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>b5_soep_long <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(year <span class="sc">~</span> item) <span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="workflow_files/figure-html/b5 histograms-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="life-events-descriptives" class="level2">
<h2 class="anchored" data-anchor-id="life-events-descriptives">Life Events Descriptives</h2>
<p>For count variables, like life events, we need to use something slightly different. We’re typically more interested in counts – in this case, how many people experienced each life event in the 10 years we’re considering?</p>
<p>To do this, we’ll use a little bit of <code>dplyr</code> rather than the base <code>R</code> function <code>table()</code> that is often used for count data. Instead, we’ll use a combination of <code>group_by()</code> and <code>n()</code> to get the counts by group. In the end, we’re left with a nice little table of counts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>events_long <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(item, le_value) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(le_value, N)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   item        `0`   `1`
   &lt;chr&gt;     &lt;int&gt; &lt;int&gt;
 1 ChldBrth   1600   735
 2 ChldMvOut  1555   830
 3 DadDied     953   213
 4 Divorce     414   122
 5 Married    1646   331
 6 MomDied     929   219
 7 MoveIn     1403   419
 8 NewPart    1207   420
 9 PartDied    402    76
10 SepPart    1172   415</code></pre>
</div>
</div>
</section>
<section id="life-event-plots" class="level2">
<h2 class="anchored" data-anchor-id="life-event-plots">Life Event Plots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>events_long <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">le_value =</span> <span class="fu">mapvalues</span>(le_value, <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="fu">c</span>(<span class="st">"No Event"</span>, <span class="st">"Event"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> le_value, <span class="at">fill =</span> le_value)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"cornflowerblue"</span>, <span class="st">"gray"</span>)) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">color =</span> <span class="st">"black"</span>)  <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>item, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="workflow_files/figure-html/life event plots-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="scale-reliability" class="level2">
<h2 class="anchored" data-anchor-id="scale-reliability">Scale Reliability</h2>
<p>When we work with scales, it’s often a good idea to check the internal consistency of your scale. If the scale isn’t performing how it should be, that could critically impact the inferences you make from your data.</p>
<p>To check the internal consistency of our Big 5 scales, we will use the <code>alpha()</code> function from the <code>psych</code> package, which will give us Cronbach’s as well as a number of other indicators of internal consistency.</p>
<p>Here’s the way you may have seen / done this in the past.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>alpha.C<span class="fl">.2005</span> <span class="ot">&lt;-</span> <span class="fu">with</span>(soep, psych<span class="sc">::</span><span class="fu">alpha</span>(<span class="at">x =</span> <span class="fu">cbind</span>(<span class="st">`</span><span class="at">Big 5__C_thorough.2005</span><span class="st">`</span>, </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">`</span><span class="at">Big 5__C_lazy.2005</span><span class="st">`</span>, <span class="st">`</span><span class="at">Big 5__C_efficient.2005</span><span class="st">`</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Some items ( Big 5__C_lazy.2005 ) were negatively correlated with the total scale and 
probably should be reversed.  
To do this, run the function again with the 'check.keys=TRUE' option</code></pre>
</div>
</div>
<p>But again, doing this 15 times would be quite a pain and would open you up to the possibility of a lot of copy and paste errors.</p>
<p>So instead, to do this, I’m going to use a mix of the tidyverse. At first glance, it may seem complex but as you move through other tutorials (particularly the <code>purrr</code> tutorial), it will begin to make much more sense.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># short function to reshape data and run alpha</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>alpha_fun <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span> <span class="fu">spread</span>(scrap,value) <span class="sc">%&gt;%</span> psych<span class="sc">::</span><span class="fu">alpha</span>(.)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>(alphas <span class="ot">&lt;-</span> soep_long <span class="sc">%&gt;%</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"Big 5"</span>) <span class="sc">%&gt;%</span> <span class="co"># filter out Big 5</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Procedural__SID, item<span class="sc">:</span>value) <span class="sc">%&gt;%</span> <span class="co"># get rid of extra columns</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(item, year) <span class="sc">%&gt;%</span> <span class="co"># group by construct and year</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> <span class="co"># nest the data</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">alpha_res =</span> <span class="fu">map</span>(data, alpha_fun), <span class="co"># run alpha</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">alpha =</span> <span class="fu">map</span>(alpha_res, <span class="sc">~</span>.<span class="sc">$</span>total[<span class="dv">2</span>])) <span class="sc">%&gt;%</span> <span class="co"># get the alpha value</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(alpha)) <span class="co"># pull it out of the list column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 5
# Groups:   item, year [15]
   item  year  data                  alpha_res std.alpha
   &lt;chr&gt; &lt;chr&gt; &lt;list&gt;                &lt;list&gt;        &lt;dbl&gt;
 1 C     2005  &lt;tibble [31,117 × 3]&gt; &lt;psych&gt;       0.515
 2 C     2009  &lt;tibble [30,728 × 3]&gt; &lt;psych&gt;       0.494
 3 C     2013  &lt;tibble [28,496 × 3]&gt; &lt;psych&gt;       0.482
 4 E     2005  &lt;tibble [31,188 × 3]&gt; &lt;psych&gt;       0.540
 5 E     2009  &lt;tibble [30,770 × 3]&gt; &lt;psych&gt;       0.530
 6 E     2013  &lt;tibble [28,532 × 3]&gt; &lt;psych&gt;       0.544
 7 A     2005  &lt;tibble [31,184 × 3]&gt; &lt;psych&gt;       0.418
 8 A     2009  &lt;tibble [30,796 × 3]&gt; &lt;psych&gt;       0.410
 9 A     2013  &lt;tibble [28,529 × 3]&gt; &lt;psych&gt;       0.401
10 O     2005  &lt;tibble [31,091 × 3]&gt; &lt;psych&gt;       0.527
11 O     2009  &lt;tibble [30,722 × 3]&gt; &lt;psych&gt;       0.510
12 O     2013  &lt;tibble [28,451 × 3]&gt; &lt;psych&gt;       0.497
13 N     2005  &lt;tibble [31,162 × 3]&gt; &lt;psych&gt;       0.473
14 N     2009  &lt;tibble [30,802 × 3]&gt; &lt;psych&gt;       0.490
15 N     2013  &lt;tibble [28,536 × 3]&gt; &lt;psych&gt;       0.480</code></pre>
</div>
</div>
</section>
<section id="zero-order-correlations" class="level2">
<h2 class="anchored" data-anchor-id="zero-order-correlations">Zero-Order Correlations</h2>
<p>Finally, we often want to look at the zero-order correlation among study variables to make sure they are performing as we think they should.</p>
<p>To run the correlations, we will need to have our data in wide format, so we’re going to do a little bit of reshaping before we do.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>b5_soep_long <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(tmp, item, year, <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> tmp, <span class="at">value =</span> value) <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Procedural__SID) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(., <span class="at">use =</span> <span class="st">"pairwise"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(., <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         DOB   Sex A_2005 A_2009 A_2013 C_2005 C_2009 C_2013 E_2005 E_2009
DOB     1.00  0.00  -0.08  -0.07  -0.06  -0.13  -0.12  -0.14   0.10   0.12
Sex     0.00  1.00   0.18   0.17   0.18   0.05   0.07   0.09   0.08   0.08
A_2005 -0.08  0.18   1.00   0.50   0.50   0.32   0.20   0.19   0.10   0.06
A_2009 -0.07  0.17   0.50   1.00   0.55   0.19   0.28   0.18   0.05   0.08
A_2013 -0.06  0.18   0.50   0.55   1.00   0.18   0.19   0.29   0.04   0.06
C_2005 -0.13  0.05   0.32   0.19   0.18   1.00   0.52   0.48   0.19   0.10
C_2009 -0.12  0.07   0.20   0.28   0.19   0.52   1.00   0.55   0.12   0.16
C_2013 -0.14  0.09   0.19   0.18   0.29   0.48   0.55   1.00   0.13   0.14
E_2005  0.10  0.08   0.10   0.05   0.04   0.19   0.12   0.13   1.00   0.61
E_2009  0.12  0.08   0.06   0.08   0.06   0.10   0.16   0.14   0.61   1.00
E_2013  0.10  0.11   0.04   0.04   0.07   0.10   0.10   0.18   0.59   0.65
N_2005  0.06 -0.18   0.10   0.06   0.02   0.09   0.06   0.03   0.18   0.10
N_2009  0.03 -0.22   0.07   0.09   0.03   0.06   0.08   0.05   0.13   0.16
N_2013  0.02 -0.21   0.06   0.06   0.10   0.04   0.06   0.08   0.10   0.10
O_2005  0.11  0.06   0.12   0.09   0.07   0.17   0.12   0.08   0.40   0.29
O_2009  0.10  0.05   0.05   0.11   0.07   0.06   0.14   0.08   0.26   0.36
O_2013  0.05  0.07   0.08   0.09   0.13   0.07   0.08   0.15   0.24   0.28
       E_2013 N_2005 N_2009 N_2013 O_2005 O_2009 O_2013
DOB      0.10   0.06   0.03   0.02   0.11   0.10   0.05
Sex      0.11  -0.18  -0.22  -0.21   0.06   0.05   0.07
A_2005   0.04   0.10   0.07   0.06   0.12   0.05   0.08
A_2009   0.04   0.06   0.09   0.06   0.09   0.11   0.09
A_2013   0.07   0.02   0.03   0.10   0.07   0.07   0.13
C_2005   0.10   0.09   0.06   0.04   0.17   0.06   0.07
C_2009   0.10   0.06   0.08   0.06   0.12   0.14   0.08
C_2013   0.18   0.03   0.05   0.08   0.08   0.08   0.15
E_2005   0.59   0.18   0.13   0.10   0.40   0.26   0.24
E_2009   0.65   0.10   0.16   0.10   0.29   0.36   0.28
E_2013   1.00   0.11   0.13   0.15   0.26   0.28   0.35
N_2005   0.11   1.00   0.55   0.53   0.09   0.08   0.06
N_2009   0.13   0.55   1.00   0.60   0.06   0.07   0.07
N_2013   0.15   0.53   0.60   1.00   0.05   0.05   0.05
O_2005   0.26   0.09   0.06   0.05   1.00   0.58   0.55
O_2009   0.28   0.08   0.07   0.05   0.58   1.00   0.61
O_2013   0.35   0.06   0.07   0.05   0.55   0.61   1.00</code></pre>
</div>
</div>
<p>This is a lot of values and a little hard to make sense of, so as a bonus, I’m going to give you a little bit of more complex code that makes this more readable (and publishable ).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> b5_soep_long <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(tmp, item, year, <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> tmp, <span class="at">value =</span> value) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Procedural__SID, <span class="sc">-</span>DOB, <span class="sc">-</span>Sex) <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(., <span class="at">use =</span> <span class="st">"pairwise"</span>) </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>r[<span class="fu">upper.tri</span>(r, <span class="at">diag =</span> T)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(r) <span class="ot">&lt;-</span> (alphas <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(item, year))<span class="sc">$</span>std.alpha</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>r <span class="sc">%&gt;%</span> data.frame <span class="sc">%&gt;%</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">"V1"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> V2, <span class="at">value =</span> r, <span class="at">na.rm =</span> T, <span class="sc">-</span>V1) <span class="sc">%&gt;%</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(V1, <span class="fu">c</span>(<span class="st">"T1"</span>, <span class="st">"Year1"</span>), <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(V2, <span class="fu">c</span>(<span class="st">"T2"</span>, <span class="st">"Year2"</span>), <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(Year1), <span class="sc">~</span><span class="fu">factor</span>(., <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">2013</span>, <span class="dv">2009</span>, <span class="dv">2005</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year2, <span class="at">y =</span> Year1, <span class="at">fill =</span> r)) <span class="sc">+</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_raster</span>() <span class="sc">+</span> </span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">high =</span> <span class="st">"red"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, </span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>   <span class="at">midpoint =</span> <span class="dv">0</span>, <span class="at">limit =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>), <span class="at">space =</span> <span class="st">"Lab"</span>, </span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>   <span class="at">name=</span><span class="st">"Correlations"</span>) <span class="sc">+</span>  </span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(r,<span class="dv">2</span>))) <span class="sc">+</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(T1 <span class="sc">~</span> T2) <span class="sc">+</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="workflow_files/figure-html/correlation plot-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Correlations among Personality Indicators. Values on the diagonal represent Chronbach’s alpha for each scale in each year. Within-trait correlations represent test-retest correlations.</figcaption><p></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>

<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./tables.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">APA Tables Part 1</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./descriptives.html" class="pagination-link">
        <span class="nav-page-text">Codebooks and Workflow Part 2</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2022, Emorie D Beck</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/emoriebeck">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/EmorieBeck">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>